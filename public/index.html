<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rent Search</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script  type="text/javascript" src="typeahead.min.js"></script>
<script type="text/javascript">
var tabLinks = new Array();
var contentDivs = new Array();

function init() {

      // Grab the tab links and content divs from the page
      var tabListItems = document.getElementById('tabs').childNodes;
      for ( var i = 0; i < tabListItems.length; i++ ) {
        if ( tabListItems[i].nodeName == "LI" ) {
          var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
          var id = getHash( tabLink.getAttribute('href') );
          tabLinks[id] = tabLink;
          contentDivs[id] = document.getElementById( id );
        }
      }

      // Assign onclick events to the tab links, and
      // highlight the first tab
      var i = 0;

      for ( var id in tabLinks ) {
        tabLinks[id].onclick = showTab;
        tabLinks[id].onfocus = function() { this.blur() };
        if ( i == 0 ) tabLinks[id].className = 'selected';
        i++;
      }
      // Hide all content divs except the first
     var i = 0;

     for ( var id in contentDivs ) {
       if ( i != 0 ) contentDivs[id].className = 'tabContent hide';
       i++;
     }
   }

   function showTab() {
  var selectedId = getHash( this.getAttribute('href') );

  // Highlight the selected tab, and dim all others.
  // Also show the selected content div, and hide all others.
  for ( var id in contentDivs ) {
    if ( id == selectedId ) {
      tabLinks[id].className = 'selected';
      contentDivs[id].className = 'tabContent';
    } else {
      tabLinks[id].className = '';
      contentDivs[id].className = 'tabContent hide';
    }
  }

  // Stop the browser following the link
  return false;
}

function getFirstChildWithTagName( element, tagName ) {
     for ( var i = 0; i < element.childNodes.length; i++ ) {
       if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
     }
   }

   function getHash( url ) {
       var hashPos = url.lastIndexOf ( '#' );
       return url.substring( hashPos + 1 );
     }


$(document).ready(function(){
  $('#SubmitBtn').click(function (event) {
    console.log("after submit button click");
    console.log($("input[name='area']").val());

    $.get('/search1', {key : $("input[name='area']").val()}, function (data) {
        console.log(data);
        console.log(data.length);
        var data1 = JSON.parse(data);
        $('#test').empty();
        $("#test").append("<tr><th>Accomodation Type</th><th>"+"Rent"+"</th></tr>");
    //    $("#test").append("<th>Rent</th></tr>");
        for (var i=0; i<data1.length; i++) {
          $("#test").append("<tr><td>Common Room</td><td>" + data1[i].COMMON_ROOM + "</td></tr>");
          $("#test").append("<tr><td>Master Room </td><td>" + data1[i].MASTER_ROOM + "</td></tr>");
          $("#test").append("<tr><td>2 Room HBD</td><td>" + data1[i].HDB_2_ROOM + "</td></tr>");
        }
    });
  });
  $('#Prioritise_by_school').click(function (event) {
    console.log("after submit button click");
    console.log($("input[name='area']").val());

    $.get('/prioritise', function (data) {
        console.log(data);
        console.log(data.length);
        var data1 = JSON.parse(data);
        $('#prioritise_result').empty();
        $("#prioritise_result").append("<tr><th>Area</th><th>"+"School Count"+"</th></tr>");
    //    $("#test").append("<th>Rent</th></tr>");
        for (var i=0; i<data1.length; i++) {
          $("#prioritise_result").append("<tr><td>"+data1[i].AREA+"</td><td>" + data1[i].SCHOOL_COUNT + "</td></tr>");
      //    $("#test").append("<tr><td>Master Room </td><td>" + data1[i].MASTER_ROOM + "</td></tr>");
      //    $("#test").append("<tr><td>2 Room HBD</td><td>" + data1[i].HDB_2_ROOM + "</td></tr>");
        }
    });
  });
});
</script>
<style type="text/css">
table, th, td {
    border: 1px solid black;
}
body { font-size: 80%; font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif; }
ul#tabs { list-style-type: none; margin: 30px 0 0 0; padding: 0 0 0.3em 0; }
ul#tabs li { display: inline; }
ul#tabs li a { color: #42454a; background-color: #dedbde; border: 1px solid #c9c3ba; border-bottom: none; padding: 0.3em; text-decoration: none; }
ul#tabs li a:hover { background-color: #f1f0ee; }
ul#tabs li a.selected { color: #000; background-color: #f1f0ee; font-weight: bold; padding: 0.7em 0.3em 0.38em 0.3em; }
div.tabContent { border: 1px solid #c9c3ba; padding: 0.5em; background-color: #f1f0ee; }
div.tabContent.hide { display: none; }
.bs-example{
	font-family: sans-serif;
	position: relative;
	margin: 50px;
}
.typeahead, .tt-query, .tt-hint {
	border: 2px solid #CCCCCC;
	border-radius: 8px;
	font-size: 24px;
	height: 30px;
	line-height: 30px;
	outline: medium none;
	padding: 8px 12px;
	width: 396px;
}
.typeahead {
	background-color: #FFFFFF;
}
.typeahead:focus {
	border: 2px solid #0097CF;
}
.tt-query {
	box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset;
}
.tt-hint {
	color: #999999;
}
.tt-dropdown-menu {
	background-color: #FFFFFF;
	border: 1px solid rgba(0, 0, 0, 0.2);
	border-radius: 8px;
	box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
	margin-top: 12px;
	padding: 8px 0;
	width: 422px;
}
.tt-suggestion {
	font-size: 24px;
	line-height: 24px;
	padding: 3px 20px;
}
.tt-suggestion.tt-is-under-cursor {
	background-color: #0097CF;
	color: #FFFFFF;
}
.tt-suggestion p {
	margin: 0;
}
</style>
</head>
<body onload="init()">

   <div class="page-header">
        <h1>Find a Place in <small> Singapore</small></h1>
  </div>

  <ul id="tabs">
    <li><a href="#averagerent">Average Rent</a></li>
    <li><a href="#analysis">Rent Analysis</a></li>
  </ul>

 <div class="tabContent" id="averagerent">
    <h3>Please Select a Area</h3>
<!--    <input type="text" name="area">-->
    <input list="hosting-plan" type="text" name="area">

    <datalist id="hosting-plan">
      <option value="Admiralty"/>
      <option value="Alexandra"/>
      <option value="Aljunied"/>
      <option value="Ang Mo Kio"/>
      <option value="Ayer Rajah"/>
      <option value="Balestier Road"/>
      <option value="Bedok"/>
      <option value="Bedok Reservoir"/>
      <option value="Bendemeer"/>
      <option value="Bishan"/>
      <option value="Boon Keng"/>
      <option value="Boon Lay"/>
      <option value="Buangkok"/>
      <option value="Bugis"/>
      <option value="Bukit Batok"/>
      <option value="Bukit Gombak"/>
      <option value="Bukit Ho Swee"/>
      <option value="Bukit Merah"/>
      <option value="Bukit Panjang"/>
      <option value="Bukit Timah"/>
      <option value="Buona Vista"/>
      <option value="Caldecott Hill"/>
      <option value="Central Area"/>
      <option value="Chai Chee"/>
      <option value="Changi"/>
      <option value="Changi Village"/>
      <option value="Chinatown"/>
      <option value="Choa Chu Kang"/>
      <option value="Chong Pang"/>
      <option value="Clementi"/>
      <option value="Commonwealth"/>
      <option value="Dhoby Ghaut"/>
      <option value="Dover"/>
      <option value="East Coast"/>
      <option value="Eunos"/>
      <option value="Farrer Park"/>
      <option value="Geylang"/>
      <option value="HarbourFront"/>
      <option value="Hillview"/>
      <option value="Holland Village"/>
      <option value="Hougang"/>
      <option value="Jalan Besar"/>
      <option value="Jalan Kayu"/>
      <option value="Joo Chiat"/>
      <option value="Jurong"/>
      <option value="Kaki Bukit"/>
      <option value="Kallang"/>
      <option value="Katong"/>
      <option value="Kembangan"/>
      <option value="Kent Ridge"/>
      <option value="Kim Seng"/>
      <option value="Kolam Ayer"/>
      <option value="Kovan"/>
      <option value="Little India"/>
      <option value="Lorong Chuan"/>
      <option value="Loyang"/>
      <option value="MacPherson"/>
      <option value="Marina Bay"/>
      <option value="Marine Parade"/>
      <option value="Marsiling"/>
      <option value="Marymount"/>
      <option value="Mountbatten"/>
      <option value="Newton"/>
      <option value="Novena"/>
      <option value="Orchard Road"/>
      <option value="Outram"/>
      <option value="Pandan"/>
      <option value="Pasir Panjang"/>
      <option value="Pasir Ris"/>
      <option value="Paya Lebar"/>
      <option value="Pioneer"/>
      <option value="Potong Pasir"/>
      <option value="Punggol"/>
      <option value="Queenstown"/>
      <option value="Radin Mas"/>
      <option value="Raffles Place"/>
      <option value="Rochor"/>
      <option value="Seletar"/>
      <option value="Sembawang"/>
      <option value="Sengkang"/>
      <option value="Serangoon"/>
      <option value="Serangoon Gardens"/>
      <option value="Serangoon North"/>
      <option value="Shenton Way"/>
      <option value="Siglap"/>
      <option value="Simei"/>
      <option value="Sin Ming"/>
      <option value="Singapore River"/>
      <option value="St Michaels"/>
      <option value="Taman Jurong"/>
      <option value="Tampines"/>
      <option value="Tanah Merah"/>
      <option value="Tanglin"/>
      <option value="Tanjong Pagar"/>
      <option value="Tanjong Rhu"/>
      <option value="Teban Gardens"/>
      <option value="Telok Ayer"/>
      <option value="Telok Blangah"/>
      <option value="Thomson"/>
      <option value="Yishun"/>

    </datalist>

  <!--  <input type="text" name="a"> -->

    <br>
    <button id="SubmitBtn" type="submit">Submit</button>
    <table>
        <div id="test"></div>
    </table>
  </div>

  <div class="tabContent" id="analysis">
    <p>Prioritizing by Need</p>
    <button id="Prioritise_by_school" type="submit">Schools</button>
    <table>
        <div id="prioritise_result"></div>
    </table>
  </div>
  <!--  <div class="bs-example">
        <input type="text" name="typeahead" class="typeahead tt-query" autocomplete="off" spellcheck="false" placeholder="Type your Query">
    </div> -->
</body>
</html>
